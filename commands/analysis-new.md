# /analysis new

Start a new analysis. Supports `--from {Quick ID}` for Quick-to-Full succession.

## Instructions

### Step 1: Check initialization

Verify `.analysis/config.md` exists. If not, tell the user to run `/analysis init` first.

### Step 2: Parse arguments

- If `--from {ID}` is provided, this is a Quickâ†’Full succession (skip to Step 2b)
- Otherwise, proceed to Step 2a

### Step 2a: Ask analysis mode

Use AskUserQuestion:

**Q1. Analysis mode?**
- **Full** â€” For decisions that matter. 5 ALIVE files + full checklists.
- **Quick** â€” Fast turnaround. Single file with abbreviated ALIVE flow.

**Q2. Analysis title?**
- Free text input (e.g., "DAU drop investigation", "Retention cohort Q1")

**Q3. (Full only) Brief description of the question**
- What do you want to find out?
- This seeds the ASK phase.

### Step 2b: Quickâ†’Full succession

- Read the Quick file referenced by `--from {ID}`
- Extract content from each ALIVE section
- Use as seed content for Full analysis files
- Add a reference link in the Quick file: `> â¬†ï¸ Promoted to Full: {new Full ID}`

### Step 3: Generate ID

Read `.analysis/status.md` to determine the next sequence number for today.

- Full: `F-{YYYY}-{MMDD}-{seq}` (e.g., `F-2026-0210-001`)
- Quick: `Q-{YYYY}-{MMDD}-{seq}` (e.g., `Q-2026-0210-002`)

Sequence resets daily, starts at 001.

### Step 4: Create files

#### For Full Analysis:

Create folder: `analyses/active/{ID}_{title-slug}/`

Generate `01_ask.md`:
```markdown
# ASK: {title}
> ID: {ID} | Stage: â“ ASK | Started: {YYYY-MM-DD}

## Problem Definition
- Question:
- Requester:
- Background:

## Success Criteria
- What does "done" look like?

## Assumptions
-

## Scope
- In scope:
- Out of scope:
- Deadline:

## Data Sources
- Primary:
- Secondary:

---
{Insert ASK checklist from .analysis/checklists/ask.md}
```

Generate `assets/README.md`:
```markdown
# Assets: {title}
> Analysis ID: {ID}

## Contents
(Describe your SQL files, notebooks, charts, and other artifacts here)

## Key Files
- (add as you work)
```

Other stage files (02_look.md ~ 05_evolve.md) are NOT created yet.
They will be generated by `/analysis next`.

#### For Quick Analysis:

Create file: `analyses/active/quick_{ID}_{title-slug}.md`

```markdown
# Quick: {title}
> ID: {ID} | Status: ðŸŸ¡ In Progress | Started: {YYYY-MM-DD}

## ASK
- Question:
- Background:
- Deadline:

## LOOK
- Data source:
- Notable findings:

## INVESTIGATE
- Method:
- Result:

## VOICE
- Conclusion (1-2 sentences):
- Audience:

## EVOLVE
- Follow-up needed: Yes / No
- Next question:

---
Check: ðŸŸ¢ Proceed / ðŸ”´ Stop
- [ ] Is the purpose of the question clear?
- [ ] Is the data source appropriate?
- [ ] Does the conclusion answer the question?

---
> ðŸ’¡ If this analysis is getting bigger: `/analysis new --from {ID}`
```

### Step 5: Update status.md

Add new entry to the Active table in `.analysis/status.md`.
Update the "Last updated" timestamp.

### Step 6: Confirmation

Tell the user:
- New analysis created with ID
- Show file path(s)
- For Full: suggest filling out 01_ask.md, then running `/analysis next`
- For Quick: suggest filling out each section in order
